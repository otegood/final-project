<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.withmong.dao.ManagerDao">

<!-- 회원목록 -->
	<select id="getAllUsers" resultType="User">
		select
			id, name, birth, email, phone, gender, schoolAbility, question, answer, point, grade, img, sumLike, delCheck
		from 
			user_table 
		order by 
			name asc
	</select>
<!-- 회원아이디로 정보조회 -->
	<select id="getUserM" parameterType="string" resultType="User">
		select
			id, name, birth, email, 
			phone, gender, schoolability, 
			question, answer, point, 
			grade, img, sumlike
		from
			user_table
		where 
			id = #{id}	
	</select>

<!-- 회원삭제체크 N->Y -->
	<update id="userDelete" parameterType="string">
		update user_table 
		set delCheck = 'Y'
		where id = #{id}
	</update>
<!-- 회원복구처리 Y->N -->
	<update id="userRestore" parameterType="string">
		update user_table 
		set delCheck = 'N'
		where id = #{id}
	</update>
<!-- 모든 포인트내역 -->	
	<select id="getAllPoints" resultType="Point">
		select 
			a.charge as "charge",
			a.withdraw as "withdraw", 
			a.regdate as "regdate", 
			a.userid as "userid.id",
			b.point as "userid.point"
		from
			point_table a, user_table b
		where
			a.userid = b.id
		order by 
			a.regdate desc
	</select>
<!-- 모든 상품목록 -->
	<select id="getAllProduct" resultType="Product">
		select
			no, 
			title,
			userid, 
			img, 
			price, 
			regdate, 
			avglike, 
			hits
		from
			product_table
		order by
			regdate desc
	</select>
</mapper>