<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.withmong.dao.MessageDao">
	<!-- 메세지 리스트 -->
	<select id="getMessages" resultType="Message">
		select 
			distinct sender
		from
			message_table
		where
			receiver = 'park'
	</select>
	
	<!-- 1:1 대화 리스트 -->
	<select id="getOnebyone" resultType="Message">
		select
			sender,
			receiver,
			contents,
			senddate,
			readcheck as readCheck
		from
			message_table
		where
			sender ='park'
		or
			receiver = 'park'
		order by
			senddate asc
	</select>
	
	<!-- 첫번째 쪽지 날리기 -->
	<insert id="firstMessage" parameterType="Message">
		insert into message_table 
		(no, contents, senddate, readcheck, sender, receiver) 
		values 
		(14, #{contents}, sysdate, 'N', #{sender}, #{receiver})
	</insert>
	
</mapper>